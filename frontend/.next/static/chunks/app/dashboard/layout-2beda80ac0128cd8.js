(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{8023:function(e,t,a){Promise.resolve().then(a.bind(a,5755))},2788:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return i},useAuth:function(){return d}});var r=a(3827),l=a(4090),s=a(7907);let n=(0,l.createContext)({user:null,loading:!0,logout:()=>{}});function i(e){let{children:t}=e,[a,i]=(0,l.useState)(null),[d,h]=(0,l.useState)(!0),c=(0,s.useRouter)();(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:4000","/auth/check"),{method:"GET",credentials:"include"});if(!e.ok)throw Error("Not logged in");console.log("Not Logged In!");let t=await e.json();i({id:t.userId,name:t.name,role:t.role})}catch(e){i(null)}finally{h(!1)}})()},[]);let o=async()=>{await fetch("".concat("http://localhost:4000","/auth/logout"),{method:"POST",credentials:"include"}),i(null),c.push("/login")};return(0,r.jsx)(n.Provider,{value:{user:a,loading:d,logout:o},children:t})}function d(){return(0,l.useContext)(n)}},5755:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var r=a(3827),l=a(8792),s=a(7907),n=a(2788),i=a(4090),d=a(7977);let h=(0,d.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),c=(0,d.Z)("folder-kanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);var o=a(9475);let u=(0,d.Z)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),f=(0,d.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),x=(0,d.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),m=(0,d.Z)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);function p(e){let{children:t}=e,{user:a,logout:d}=(0,n.useAuth)(),p=(0,s.usePathname)(),[y,b]=(0,i.useState)(!1),[g,k]=(0,i.useState)(!1);if(!a)return null;let w=[];"user"===a.role&&w.push({label:"Dashboard",href:"/dashboard",icon:(0,r.jsx)(h,{size:18})},{label:"My Liens",href:"/dashboard/liens",icon:(0,r.jsx)(c,{size:18})}),"admin"===a.role&&w.push({label:"Liens",icon:(0,r.jsx)(o.Z,{size:18}),children:[{label:"Show All",href:"/dashboard/liens"},{label:"Add New",href:"/dashboard/liens/new"},{label:"Find Lien",href:"/dashboard/liens/search"}]},{label:"Dealers",icon:(0,r.jsx)(u,{size:18}),children:[{label:"Show All",href:"/dashboard/dealers"},{label:"Add New",href:"/dashboard/dealers/new"},{label:"Find Dealer",href:"/dashboard/dealers/search"}]},{label:"Users",icon:(0,r.jsx)(f,{size:18}),children:[{label:"Show All",href:"/dashboard/users"},{label:"Add New",href:"/dashboard/users/new"},{label:"Find Dealer",href:"/dashboard/users/search"}]});let j=e=>(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-800 p-4",children:[(0,r.jsx)("h2",{className:"text-white",children:"admin"===a.role?"Admin Menu":"User Menu"}),(0,r.jsx)("button",{onClick:()=>e?k(!1):b(!y),className:"text-white",children:"✕"})]}),(0,r.jsx)("nav",{className:"flex-1 overflow-y-auto space-y-2 p-4",children:w.map((e,t)=>e.children?(0,r.jsx)(v,{item:e,pathname:p,isCollapsed:y},t):(0,r.jsxs)(l.default,{href:e.href,className:"flex items-center gap-2 px-4 py-2 rounded hover:bg-gray-700 transition ".concat(p===e.href?"bg-gray-800":""),children:[e.icon,!y&&(0,r.jsx)("span",{children:e.label})]},e.href))}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-800 text-sm",children:[(0,r.jsxs)("div",{className:"text-white mb-2",children:["Logged in as: ",(0,r.jsx)("strong",{children:a.name})]}),(0,r.jsxs)("button",{onClick:d,className:"w-full flex items-center gap-2 bg-red-600 hover:bg-red-700 py-1 px-3 rounded text-white",children:[(0,r.jsx)(x,{size:16})," Logout"]})]})]});function v(e){let{item:t,pathname:a,isCollapsed:s}=e,[n,d]=(0,i.useState)(!1);return(0,r.jsxs)("div",{className:"text-white",children:[(0,r.jsxs)("button",{onClick:()=>d(!n),className:"w-full flex items-center justify-between gap-2 px-4 py-2 rounded hover:bg-gray-700 transition ".concat(n?"bg-gray-800":""),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[t.icon,!s&&(0,r.jsx)("span",{children:t.label})]}),!s&&(0,r.jsx)("span",{children:n?"▲":"▼"})]}),n&&!s&&(0,r.jsx)("div",{className:"ml-6 mt-1",children:t.children.map(e=>(0,r.jsx)(l.default,{href:e.href,className:"block px-2 py-1 rounded hover:bg-gray-600 text-sm ".concat(a===e.href?"bg-gray-700":""),children:e.label},e.href))})]})}return(0,r.jsxs)("div",{className:"min-h-screen flex",children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-900 transition-transform duration-300 md:hidden ".concat(g?"translate-x-0":"-translate-x-full"),children:(0,r.jsx)("aside",{className:"w-64 h-full shadow-lg",children:j(!0)})}),(0,r.jsx)("aside",{className:"hidden md:block fixed top-0 left-0 h-screen z-40 w-64\n    bg-gray-900 text-white transition-transform duration-300 ".concat(y?"-translate-x-full":"translate-x-0"),children:j(!1)}),(0,r.jsxs)("main",{className:"flex-1 bg-gray-50 min-h-screen transition-all duration-300 ".concat(y?"md:ml-0":"md:ml-64"),children:[(0,r.jsxs)("div",{className:"p-4 bg-white shadow flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>{window.innerWidth<768?k(!0):b(e=>!e)},className:"text-gray-600",children:(0,r.jsx)(m,{size:24})}),(0,r.jsx)("span",{})]}),(0,r.jsx)("div",{className:"p-6",children:t})]})]})}},7977:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(4090);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:c="",children:o,iconNode:u,...f}=e;return(0,r.createElement)("svg",{ref:t,...h,width:l,height:l,stroke:a,strokeWidth:n?24*Number(s)/Number(l):s,className:i("lucide",c),...!o&&!d(f)&&{"aria-hidden":"true"},...f},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,s)=>{let{className:d,...h}=a;return(0,r.createElement)(c,{ref:s,iconNode:t,className:i("lucide-".concat(l(n(e))),"lucide-".concat(e),d),...h})});return a.displayName=n(e),a}},9475:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(7977).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},function(e){e.O(0,[901,971,69,744],function(){return e(e.s=8023)}),_N_E=e.O()}]);