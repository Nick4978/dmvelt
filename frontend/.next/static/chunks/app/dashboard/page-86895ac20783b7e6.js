(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6565:function(e,t,s){Promise.resolve().then(s.bind(s,6439))},6439:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var l=s(3827),a=s(7934),n=s(4090),i=s(7907),r=s(3125),c=s(5149),o=s(9475),d=s(9990),u=s(4187);function h(e){let{readFlag:t}=e,[s,a]=(0,n.useState)([]),[h,m]=(0,n.useState)(1),[x,g]=(0,n.useState)(25),[f,b]=(0,n.useState)(0),[v,j]=(0,n.useState)(!0),[p,y]=(0,n.useState)([]),[S,N]=(0,n.useState)(null),[w,D]=(0,n.useState)(""),[E,k]=(0,n.useState)(null),[C,F]=(0,n.useState)(""),[R,Z]=(0,n.useState)(""),_={0:{label:"Lien Received",color:"bg-gray-200 text-gray-800",icon:"\uD83D\uDCE5",tooltip:"The lien has been received but not processed.",jsx:(0,l.jsx)(c.Z,{size:12})},1:{label:"Satisfy Submitted",color:"bg-yellow-200 text-yellow-800",icon:"\uD83D\uDCDD",tooltip:"Satisfy paperwork submitted but not sent yet.",jsx:(0,l.jsx)(o.Z,{size:12})},2:{label:"Satisfy Sent",color:"bg-blue-200 text-blue-800",icon:"\uD83D\uDCE4",tooltip:"Satisfy documents sent to lienholder.",jsx:(0,l.jsx)(d.Z,{size:12})},3:{label:"Satisfy Confirmed",color:"bg-green-200 text-green-800",icon:"✅",tooltip:"Lien has been satisfied and confirmed.",jsx:(0,l.jsx)(u.Z,{size:12})}},[z,P]=(0,n.useState)(null),[T,L]=(0,n.useState)(!0),O=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{j(!0);try{let e=new URLSearchParams({page:String(h),limit:String(x),search:C});null!==E&&e.append("status",E.toString());let s=await fetch("".concat("http://localhost:4000","/liens/getall?readFlag=").concat(null!=t&&t,"&").concat(e.toString()),{method:"GET",credentials:"include"});if(!s.ok)throw Error("Failed to fetch liens");let l=await s.json();a(l.liens),b(l.totalPages)}catch(e){console.error("Error fetching liens:",e)}finally{j(!1)}})()},[t,h,x,E,C]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{F(R),m(1)},300);return()=>clearTimeout(e)},[R]);let U=p.length>0&&p.length===s.length;p.length,(0,n.useEffect)(()=>{O.current&&(O.current.indeterminate=p.length>0&&!U)},[p,U]);let W=(0,i.useRouter)(),q=[...s].sort((e,t)=>{if(!z)return 0;let s=(e,t)=>{switch(t){case"vehicle.vin":return e.vehicle.vin;case"vehicle.make":return e.vehicle.make;case"vehicle.model":return e.vehicle.model;case"vehicle.year":return e.vehicle.year;default:return e[t]}},l=s(e,z),a=s(t,z);return"number"==typeof l&&"number"==typeof a?T?l-a:a-l:T?String(l).localeCompare(String(a)):String(a).localeCompare(String(l))}),A=(0,i.usePathname)();return(0,l.jsx)("div",{className:"md:hidden space-y-4 mt-4",children:q.map(e=>{var t,s;return(0,l.jsxs)("div",{className:"border rounded-lg p-4 bg-white shadow-sm",onClick:()=>W.push("".concat(A,"/liens/").concat(e.id)),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsx)("div",{className:"text-xs text-gray-500",children:(0,r.WU)(new Date(e.createdAt),"M/d/yyyy p")}),(0,l.jsx)("div",{className:"text-xs font-semibold ".concat(null===(t=_[e.status])||void 0===t?void 0:t.color),children:null===(s=_[e.status])||void 0===s?void 0:s.label})]}),(0,l.jsx)("div",{className:"text-sm font-bold",children:e.vehicle.vin}),(0,l.jsxs)("div",{className:"text-sm text-gray-700",children:[e.vehicle.year," ",e.vehicle.make," ",e.vehicle.model]}),(0,l.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs",children:[(0,l.jsx)("button",{className:"text-blue-600 hover:underline",children:"Request"}),(0,l.jsx)("button",{className:"text-green-600 hover:underline",children:"Satisfy"}),(0,l.jsx)("button",{className:"text-red-600 hover:underline",children:"Report"})]})]},e.id)})})}function m(){return(0,l.jsx)("div",{className:"min-h-screen flex bg-gray-100",children:(0,l.jsxs)("main",{className:"flex-1 p-6",children:[(0,l.jsxs)("header",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Dashboard"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Welcome! Here’s a summary of your liens."})]}),(0,l.jsxs)("div",{className:"w-full table-auto border-collapse md:table hidden",children:[(0,l.jsx)("section",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsx)(a.Z,{readFlag:!1})}),(0,l.jsx)("section",{className:"bg-white rounded-lg shadow p-4 mt-6",children:(0,l.jsx)(a.Z,{readFlag:!0})})]}),(0,l.jsxs)("div",{className:"md:hidden space-y-4",children:[(0,l.jsx)("section",{className:"bg-white rounded-lg shadow p-4",children:(0,l.jsx)(h,{readFlag:!1})}),(0,l.jsx)("section",{className:"bg-white rounded-lg shadow p-4 mt-6",children:(0,l.jsx)(h,{readFlag:!0})})]})]})})}}},function(e){e.O(0,[901,613,934,971,69,744],function(){return e(e.s=6565)}),_N_E=e.O()}]);