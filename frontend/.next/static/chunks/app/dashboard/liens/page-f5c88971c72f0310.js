(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{191:function(e,t,n){Promise.resolve().then(n.bind(n,1376))},2788:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthProvider:function(){return r},useAuth:function(){return s}});var l=n(3827),o=n(4090),u=n(7907);let c=(0,o.createContext)({user:null,loading:!0,logout:()=>{}});function r(e){let{children:t}=e,[n,r]=(0,o.useState)(null),[s,a]=(0,o.useState)(!0),i=(0,u.useRouter)();(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:4000","/auth/check"),{method:"GET",credentials:"include"});if(!e.ok)throw Error("Not logged in");console.log("Not Logged In!");let t=await e.json();r({id:t.userId,name:t.name,role:t.role})}catch(e){r(null)}finally{a(!1)}})()},[]);let d=async()=>{await fetch("".concat("http://localhost:4000","/auth/logout"),{method:"POST",credentials:"include"}),r(null),i.push("/login")};return(0,l.jsx)(c.Provider,{value:{user:n,loading:s,logout:d},children:t})}function s(){return(0,o.useContext)(c)}},1376:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var l=n(3827),o=n(4090),u=n(2788),c=n(7934);function r(){let{user:e}=(0,u.useAuth)(),[t,n]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0);return((0,o.useEffect)(()=>{let e=localStorage.getItem("dealerId");e&&fetch("".concat("http://localhost:4000","/liens/getall?dealerId=").concat(e),{method:"GET",credentials:"include"}).then(e=>e.json()).then(e=>{n(e.liens),s(!1)})},[]),r)?(0,l.jsx)("div",{children:"Loading liens..."}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"My Liens"}),(0,l.jsx)(c.Z,{})]})}}},function(e){e.O(0,[901,613,934,971,69,744],function(){return e(e.s=191)}),_N_E=e.O()}]);