(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[909],{919:function(e,t,s){Promise.resolve().then(s.bind(s,9784))},2788:function(e,t,s){"use strict";s.r(t),s.d(t,{AuthProvider:function(){return c},useAuth:function(){return o}});var a=s(3827),l=s(4090),r=s(7907);let n=(0,l.createContext)({user:null,loading:!0,logout:()=>{}});function c(e){let{children:t}=e,[s,c]=(0,l.useState)(null),[o,i]=(0,l.useState)(!0),d=(0,r.useRouter)();(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("http://localhost:4000","/auth/check"),{method:"GET",credentials:"include"});if(!e.ok)throw Error("Not logged in");console.log("Not Logged In!");let t=await e.json();c({id:t.userId,name:t.name,role:t.role})}catch(e){c(null)}finally{i(!1)}})()},[]);let u=async()=>{await fetch("".concat("http://localhost:4000","/auth/logout"),{method:"POST",credentials:"include"}),c(null),d.push("/login")};return(0,a.jsx)(n.Provider,{value:{user:s,loading:o,logout:u},children:t})}function o(){return(0,l.useContext)(n)}},9784:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(3827),l=s(4090),r=s(2788),n=s(6347);function c(){let{user:e}=(0,r.useAuth)(),[t,s]=(0,l.useState)([]),[c,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{fetch("".concat("http://localhost:4000","/dealers/getall"),{method:"GET",credentials:"include"}).then(e=>e.json()).then(e=>{s(e.dealers),o(!1)})},[]),c)?(0,a.jsx)("div",{children:"Loading dealers..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dealers"}),(0,a.jsx)(n.Z,{})]})}},6347:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(3827),l=s(4090),r=s(7907),n=s(8792);let c=l.memo(e=>{let{sortedDealers:t,selectedIds:s,toggleSelect:l,pathname:c,size:o}=e,i=(0,r.useRouter)();return(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{onClick:()=>i.push("".concat(c,"/dealer/").concat(e.id)),className:"border-b hover:bg-blue-100 transition-colors cursor-pointer",children:[(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>l(e.id),onClick:e=>e.stopPropagation()})}),(0,a.jsx)("td",{className:"p-2",children:(0,a.jsx)(n.default,{href:"".concat(c,"/dealers/").concat(e.id),className:"text-blue-600 hover:underline",onClick:e=>e.stopPropagation(),children:e.name})}),(0,a.jsx)("td",{className:"p-2",children:e.address}),"small"!==o&&(0,a.jsx)("td",{className:"p-2",children:e.city}),(0,a.jsx)("td",{className:"p-2 text-center",children:e.state}),"small"!==o&&(0,a.jsx)("td",{className:"p-2",children:e.zipCode})]},e.id))})});function o(e){let{size:t,headerTitle:s,defaultItemsPerPage:n=25}=e,[o,i]=(0,l.useState)([]),[d,u]=(0,l.useState)(1),[h,m]=(0,l.useState)(n),[p,x]=(0,l.useState)(0),[f,g]=(0,l.useState)(!0),[j,b]=(0,l.useState)([]),[y,N]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[v,k]=(0,l.useState)(""),[w,E]=(0,l.useState)(null),[P,z]=(0,l.useState)(!0),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{(async()=>{g(!0);try{let e=new URLSearchParams({page:String(d),limit:String(h),search:C}),t=await fetch("".concat("http://localhost:4000","/dealers/getall?").concat(e.toString()),{method:"GET",credentials:"include"});if(!t.ok)throw Error("Failed to fetch dealers");let s=await t.json();i(s.dealers),x(s.totalPages)}catch(e){console.error("Error fetching dealers:",e)}finally{g(!1)}})()},[d,h,C]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{S(v),u(1)},300);return()=>clearTimeout(e)},[v]);let _=j.length>0&&j.length===o.length;j.length,(0,l.useEffect)(()=>{T.current&&(T.current.indeterminate=j.length>0&&!_)},[j,_]),(0,r.useRouter)();let L=[...o.filter(e=>e.name.toLowerCase().includes(C.toLowerCase()))].sort((e,t)=>{if(!w)return 0;let s=(e,t)=>{switch(t){case"dealer.name":return e.name;case"dealer.address":return e.address;case"dealer.city":return e.city;case"dealer.state":return e.state;case"dealer.zipCode":return e.zipCode;default:return e[t]}},a=s(e,w),l=s(t,w);return"number"==typeof a&&"number"==typeof l?P?a-l:l-a:P?String(a).localeCompare(String(l)):String(l).localeCompare(String(a))}),R=(0,r.usePathname)();return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:s}),(0,a.jsxs)("div",{className:"flex justify-end mb-4",children:[(0,a.jsx)("label",{className:"text-sm mr-2 self-center",children:"Items per page"}),(0,a.jsxs)("select",{value:h,onChange:e=>{m(Number(e.target.value)),u(1)},className:"border rounded px-2 py-1 text-sm border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:5,children:"5"}),(0,a.jsx)("option",{value:25,children:"25"}),(0,a.jsx)("option",{value:50,children:"50"}),(0,a.jsx)("option",{value:100,children:"100"})]})]}),(0,a.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-100 text-xs uppercase text-gray-600",children:[(0,a.jsx)("th",{className:"p-2",children:(0,a.jsx)("input",{ref:T,type:"checkbox",checked:_,onChange:()=>{_?b([]):b(o.map(e=>e.id))},onClick:e=>e.stopPropagation()})}),(0,a.jsxs)("th",{onClick:()=>{"dealer.name"===w?z(!P):(E("dealer.name"),z(!0))},className:"p-2 cursor-pointer select-none",children:["Name ","dealer.name"===w&&(P?"▲":"▼"),(0,a.jsx)("input",{type:"text",placeholder:"[...]",value:v,onChange:e=>{e.stopPropagation(),k(e.target.value)},onClick:e=>e.stopPropagation(),className:"bg-gray-100 rounded px-2 py-1 text-sm border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("th",{onClick:()=>{"dealer.address"===w?z(!P):(E("dealer.address"),z(!0))},className:"p-2 cursor-pointer select-none text-center",children:["Address ","dealer.address"===w&&(P?"▲":"▼")]}),"small"!==t&&(0,a.jsxs)("th",{onClick:()=>{"dealer.city"===w?z(!P):(E("dealer.city"),z(!0))},className:"p-2 cursor-pointer select-none",children:["City ","dealer.city"===w&&(P?"▲":"▼")]}),(0,a.jsxs)("th",{onClick:()=>{"dealer.state"===w?z(!P):(E("dealer.state"),z(!0))},className:"p-2 cursor-pointer select-none",children:["State ","dealer.state"===w&&(P?"▲":"▼")]}),"small"!==t&&(0,a.jsxs)("th",{onClick:()=>{"dealer.zipCode"===w?z(!P):(E("dealer.zipCode"),z(!0))},className:"p-2 cursor-pointer select-none",children:["Zip Code"," ","dealer.zipCode"===w&&(P?"▲":"▼")]})]})}),(0,a.jsx)(c,{sortedDealers:L,selectedIds:j,toggleSelect:e=>{b(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},pathname:R,size:t})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",p]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>u(e=>Math.max(e-1,1)),disabled:1===d,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>u(e=>Math.min(e+1,p)),disabled:d===p,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50",children:"Next"})]})]})]})}c.displayName="DealerTableBody"}},function(e){e.O(0,[901,971,69,744],function(){return e(e.s=919)}),_N_E=e.O()}]);