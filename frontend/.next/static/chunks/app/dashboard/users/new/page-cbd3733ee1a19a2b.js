(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{2807:function(e,a,t){Promise.resolve().then(t.bind(t,7488))},7488:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return o}});var s=t(3827),l=t(4090),n=t(7578),r=t(8192),i=t(6347);function o(){let[e,a]=(0,l.useState)("show"),[t,o]=(0,l.useState)({name:"",address:"",city:"",state:"",zip:"",phone:"",email:"",isEmployee:!0,isLocalAdmin:!1,isGlobalAdmin:!1}),c=e=>{let{id:t}=e.target;switch(o(e=>({...e,isEmployee:"employee"===t,isLocalAdmin:"dealerAdmin"===t,isGlobalAdmin:"globalAdmin"===t})),t){case"employee":case"dealerAdmin":a("show");break;case"globalAdmin":a("hide")}},d=e=>{let{name:a,value:t}=e.target;("zip"!==a||/^\d*$/.test(t))&&("creditsRemaining"!==a||/^\d*$/.test(t))&&o(e=>({...e,[a]:t}))};return(0,s.jsxs)("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow mt-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"New User Entry"}),(0,s.jsxs)("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",onSubmit:e=>{e.preventDefault();let a=e.currentTarget,s=a.elements.namedItem("phone");if(s.setCustomValidity(""),!/^\(\d{3}\) \d{3}-\d{4}$/.test(s.value.trim())){s.setCustomValidity("Phone must be in format (xxx) xxx-xxxx"),s.reportValidity();return}if(a.elements.namedItem("email").setCustomValidity(""),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)){let e=a.elements.namedItem("email");e.setCustomValidity("Invalid email address"),e.reportValidity();return}console.log("Submitting:",t)},children:[(0,s.jsx)("input",{name:"email",placeholder:"Email Address",value:t.email,onChange:d,className:"input",required:!0}),(0,s.jsx)("input",{name:"name",placeholder:"Name",value:t.name,onChange:d,className:"input",required:!0}),(0,s.jsx)(n.Z,{value:t.address,onChange:e=>o(a=>({...a,address:e})),onSelect:e=>{let{address:a,city:t,state:s,zip:l}=e;return o(e=>({...e,address:a,city:t,state:r.v[s]||s,zip:l}))}}),(0,s.jsx)("input",{name:"city",placeholder:"City",value:t.city,onChange:d,className:"input"}),(0,s.jsxs)("select",{name:"state",value:t.state,onChange:d,className:"input",children:[(0,s.jsx)("option",{value:"",children:"Select State"}),["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsx)("input",{name:"zip",placeholder:"Zip Code",value:t.zip,onChange:d,className:"input",maxLength:5}),(0,s.jsx)("input",{name:"phone",placeholder:"Phone (xxx) xxx-xxxx",value:t.phone,onChange:d,onBlur:e=>{let a=e.target.value.replace(/\D/g,"");if(10===a.length){let t="(".concat(a.slice(0,3),") ").concat(a.slice(3,6),"-").concat(a.slice(6));e.target.value=t}},className:"input"}),(0,s.jsxs)("div",{className:"md:col-span-1 text-right",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{id:"employee",type:"radio",radioGroup:"userType",name:"userType",checked:t.isEmployee,onChange:c,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Employee"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{id:"dealerAdmin",type:"radio",radioGroup:"userType",name:"userType",checked:t.isLocalAdmin,onChange:c,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Dealer Administrator"})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{id:"globalAdmin",type:"radio",radioGroup:"userType",name:"userType",checked:t.isGlobalAdmin,onChange:c,className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Global Administrator"})]})]}),"show"===e&&(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsx)(i.Z,{size:"small",headerTitle:"Select Dealership",defaultItemsPerPage:5})}),(0,s.jsx)("div",{className:"md:col-span-2 text-right",children:(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white py-2 px-6 rounded hover:bg-blue-700",children:"Submit User"})})]})]})}},8192:function(e,a,t){"use strict";t.d(a,{v:function(){return s}});let s={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"}},7578:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(3827),l=t(4090);function n(e){let{value:a,onChange:t,onSelect:n,placeholder:r="Enter address",required:i,name:o="address",className:c="input"}=e,d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=setInterval(()=>{if(window.google&&window.google.maps&&window.google.maps.places&&d.current){let a=new window.google.maps.places.Autocomplete(d.current,{types:["address"],componentRestrictions:{country:"us"}});a.addListener("place_changed",()=>{let e=a.getPlace().address_components;if(!e)return;let s=a=>{var t;return(null===(t=e.find(e=>a.every(a=>e.types.includes(a))))||void 0===t?void 0:t.long_name)||""},l="".concat(s(["street_number"])," ").concat(s(["route"])).trim(),r=s(["locality"]),i=s(["administrative_area_level_1"]),o=s(["postal_code"]);t("".concat(l,", ").concat(r,", ").concat(i," ").concat(o)),null==n||n({address:l,city:r,state:i,zip:o})}),clearInterval(e)}},200);return()=>clearInterval(e)},[t,n]),(0,s.jsx)("input",{ref:d,type:"text",name:o,required:i,className:c,placeholder:r,value:a,autoComplete:"off",onChange:e=>t(e.target.value)})}},6347:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var s=t(3827),l=t(4090),n=t(7907),r=t(8792);let i=l.memo(e=>{let{sortedDealers:a,selectedIds:t,toggleSelect:l,pathname:i,size:o}=e,c=(0,n.useRouter)();return(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{onClick:()=>c.push("".concat(i,"/dealer/").concat(e.id)),className:"border-b hover:bg-blue-100 transition-colors cursor-pointer",children:[(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:()=>l(e.id),onClick:e=>e.stopPropagation()})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)(r.default,{href:"".concat(i,"/dealers/").concat(e.id),className:"text-blue-600 hover:underline",onClick:e=>e.stopPropagation(),children:e.name})}),(0,s.jsx)("td",{className:"p-2",children:e.address}),"small"!==o&&(0,s.jsx)("td",{className:"p-2",children:e.city}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.state}),"small"!==o&&(0,s.jsx)("td",{className:"p-2",children:e.zipCode})]},e.id))})});function o(e){let{size:a,headerTitle:t,defaultItemsPerPage:r=25}=e,[o,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(1),[m,p]=(0,l.useState)(r),[h,x]=(0,l.useState)(0),[g,N]=(0,l.useState)(!0),[y,f]=(0,l.useState)([]),[b,j]=(0,l.useState)(""),[C,v]=(0,l.useState)(""),[A,w]=(0,l.useState)(""),[S,k]=(0,l.useState)(null),[I,M]=(0,l.useState)(!0),T=(0,l.useRef)(null);(0,l.useEffect)(()=>{(async()=>{N(!0);try{let e=new URLSearchParams({page:String(d),limit:String(m),search:C}),a=await fetch("".concat("http://localhost:4000","/dealers/getall?").concat(e.toString()),{method:"GET",credentials:"include"});if(!a.ok)throw Error("Failed to fetch dealers");let t=await a.json();c(t.dealers),x(t.totalPages)}catch(e){console.error("Error fetching dealers:",e)}finally{N(!1)}})()},[d,m,C]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{v(A),u(1)},300);return()=>clearTimeout(e)},[A]);let E=y.length>0&&y.length===o.length;y.length,(0,l.useEffect)(()=>{T.current&&(T.current.indeterminate=y.length>0&&!E)},[y,E]),(0,n.useRouter)();let D=[...o.filter(e=>e.name.toLowerCase().includes(C.toLowerCase()))].sort((e,a)=>{if(!S)return 0;let t=(e,a)=>{switch(a){case"dealer.name":return e.name;case"dealer.address":return e.address;case"dealer.city":return e.city;case"dealer.state":return e.state;case"dealer.zipCode":return e.zipCode;default:return e[a]}},s=t(e,S),l=t(a,S);return"number"==typeof s&&"number"==typeof l?I?s-l:l-s:I?String(s).localeCompare(String(l)):String(l).localeCompare(String(s))}),P=(0,n.usePathname)();return(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mt-6",children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-4",children:t}),(0,s.jsxs)("div",{className:"flex justify-end mb-4",children:[(0,s.jsx)("label",{className:"text-sm mr-2 self-center",children:"Items per page"}),(0,s.jsxs)("select",{value:m,onChange:e=>{p(Number(e.target.value)),u(1)},className:"border rounded px-2 py-1 text-sm border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:5,children:"5"}),(0,s.jsx)("option",{value:25,children:"25"}),(0,s.jsx)("option",{value:50,children:"50"}),(0,s.jsx)("option",{value:100,children:"100"})]})]}),(0,s.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 text-xs uppercase text-gray-600",children:[(0,s.jsx)("th",{className:"p-2",children:(0,s.jsx)("input",{ref:T,type:"checkbox",checked:E,onChange:()=>{E?f([]):f(o.map(e=>e.id))},onClick:e=>e.stopPropagation()})}),(0,s.jsxs)("th",{onClick:()=>{"dealer.name"===S?M(!I):(k("dealer.name"),M(!0))},className:"p-2 cursor-pointer select-none",children:["Name ","dealer.name"===S&&(I?"▲":"▼"),(0,s.jsx)("input",{type:"text",placeholder:"[...]",value:A,onChange:e=>{e.stopPropagation(),w(e.target.value)},onClick:e=>e.stopPropagation(),className:"bg-gray-100 rounded px-2 py-1 text-sm border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("th",{onClick:()=>{"dealer.address"===S?M(!I):(k("dealer.address"),M(!0))},className:"p-2 cursor-pointer select-none text-center",children:["Address ","dealer.address"===S&&(I?"▲":"▼")]}),"small"!==a&&(0,s.jsxs)("th",{onClick:()=>{"dealer.city"===S?M(!I):(k("dealer.city"),M(!0))},className:"p-2 cursor-pointer select-none",children:["City ","dealer.city"===S&&(I?"▲":"▼")]}),(0,s.jsxs)("th",{onClick:()=>{"dealer.state"===S?M(!I):(k("dealer.state"),M(!0))},className:"p-2 cursor-pointer select-none",children:["State ","dealer.state"===S&&(I?"▲":"▼")]}),"small"!==a&&(0,s.jsxs)("th",{onClick:()=>{"dealer.zipCode"===S?M(!I):(k("dealer.zipCode"),M(!0))},className:"p-2 cursor-pointer select-none",children:["Zip Code"," ","dealer.zipCode"===S&&(I?"▲":"▼")]})]})}),(0,s.jsx)(i,{sortedDealers:D,selectedIds:y,toggleSelect:e=>{f(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},pathname:P,size:a})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",h]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>u(e=>Math.max(e-1,1)),disabled:1===d,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50",children:"Previous"}),(0,s.jsx)("button",{onClick:()=>u(e=>Math.min(e+1,h)),disabled:d===h,className:"px-3 py-1 bg-gray-200 rounded text-sm disabled:opacity-50",children:"Next"})]})]})]})}i.displayName="DealerTableBody"}},function(e){e.O(0,[901,971,69,744],function(){return e(e.s=2807)}),_N_E=e.O()}]);